pipeline{
   pipeline{
    agent any
    tools {
      maven 'MAVEN_HOME'
    }
	
    environment {
        DOCKER_HUB_CREDENTIALS = credentials('Docker-ID')
    }

    stages{
       stage('Maven Build File') {
         steps {
	   // mvn build
           sh "mvn clean package"
	  }
       }
       
      stage('Docker Build'){
            steps{
		sh "docker build . -t dfstell/finaldevops:1.0"
            }
        }
        
      stage('DockerHub Push'){
            steps{
		sh "sudo docker login -u ${DOCKER_HUB_CREDENTIALS_USR} -p ${DOCKER_HUB_CREDENTIALS_PSW}"
                sh "sudo docker push dfstell/finaldevops:latest"
            }
        }
  
      stage('Docker Deploy'){
            steps{
            }
        }        
    }
    
}
